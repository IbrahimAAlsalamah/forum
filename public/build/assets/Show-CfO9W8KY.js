import{k as x,u as E,r as v,c as f,w as m,b as o,a as s,g as p,t as n,d as y,e as _,o as i,f as r,l as w,j as F,F as N,h as T,A as z}from"./app-D_Z8LI_J.js";import{u as I,_ as P}from"./AppLayout-CsuU7zW0.js";import{C as R,P as U}from"./PageHeading-CECpuRUn.js";import{r as j,u as H,_ as L}from"./useInfiniteScroll-CdevfS7z.js";import{r as M,a as q,_ as G}from"./Comment-D_E5UVme.js";import{_ as J}from"./InputLabel-DMvGTXN8.js";import{_ as K}from"./PrimaryButton-DMlAO4lx.js";import{_ as O}from"./TextAreaInput-5uKZtE-O.js";import{_ as Q}from"./InputError-khT0wapE.js";import{_ as W}from"./SecondaryButton-DqPVMlAJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ConfirmationModal-C1EAyqLP.js";import"./Modal-CseHda0g.js";const X={class:"mt-1 space-x-3 flex items-center"},Y={class:"text-pink-600 font-bold text-sm"},Z={key:0,class:"flex items-center"},ee={class:"text-gray-500 text-sm"},te={class:"mt-4"},se={class:"whitespace-pre-wrap font-sans break-all"},oe={class:"mt-6"},ae={class:"font-semibold text-xl"},ne={class:"divide-y mt-2"},ge={__name:"Show",props:["post","comments","words"],setup(e){const c=e,C=x(()=>j(c.post.created_at)),a=E({body:""}),k=v(null),d=v(null),$=x(()=>c.comments.data.find(t=>t.id===d.value)),{confirmation:b}=I(),S=t=>{d.value=t,a.body=$.value?.body,k.value?.focus()},g=()=>{d.value=null,a.reset()},V=()=>a.post(route("posts.comments.store",c.post.id),{preserveScroll:!0,onSuccess:()=>a.reset()}),B=async()=>{if(!await b("Are you sure you want to Update it ?")){k.value?.focus();return}a.put(route("comments.update",{comment:d.value,page:c.comments.meta.current_page}),{onSuccess:g,preserveScroll:!0})},A=async t=>{await b("Are you sure you want to delete it ?")&&z.delete(route("comments.destroy",{comment:t,page:c.comments.meta.current_page}),{preserveScroll:!0})},h=v(null),{items:D}=H("comments",h);return(t,l)=>(i(),f(P,{title:e.post.title},{default:m(()=>[o(R,null,{default:m(()=>[o(L,{href:t.route("posts.index",{topic:e.post.topic.slug})},{default:m(()=>[p(n(e.post.topic.name),1)]),_:1},8,["href"]),o(U,{class:"mt-2"},{default:m(()=>[p(n(e.post.title),1)]),_:1}),s("div",X,[s("span",Y,n(e.post.likes_count)+" likes",1),t.$page.props.auth.user?(i(),y("div",Z,[e.post.can.like?(i(),f(r(w),{key:0,href:t.route("likes.store",["post",e.post.id]),method:"post"},{default:m(()=>[o(r(M),{class:"size-4 text-pink-600"})]),_:1},8,["href"])):(i(),f(r(w),{key:1,href:t.route("likes.destroy",["post",e.post.id]),method:"delete"},{default:m(()=>[o(r(q),{class:"size-4 text-pink-600"})]),_:1},8,["href"]))])):_("",!0),l[2]||(l[2]=s("span",{class:"text-sm"},"|",-1)),s("span",ee,n(C.value)+" ago by "+n(e.post.user.name),1)]),s("article",te,[s("pre",se,n(e.post.body),1)]),s("div",oe,[s("h2",ae,n(e.words.comments),1),t.$page.props.auth.user?(i(),y("form",{key:0,onSubmit:l[1]||(l[1]=F(()=>d.value?B():V(),["prevent"]))},[s("div",null,[o(J,{for:"body",class:"sr-only"},{default:m(()=>[p(n(e.words.comment),1)]),_:1}),o(O,{ref_key:"commentTextAreaRef",ref:k,id:"body",modelValue:r(a).body,"onUpdate:modelValue":l[0]||(l[0]=u=>r(a).body=u),rows:"4",placeholder:"add comment..."},null,8,["modelValue"]),o(Q,{message:r(a).errors.body},null,8,["message"])]),o(K,{type:"submit",class:"mt-3",disabled:r(a).processing,textContent:n(d.value?e.words.edit:e.words.addComment)},null,8,["disabled","textContent"]),d.value?(i(),f(W,{key:0,onClick:g,class:"ml-2"},{default:m(()=>[...l[3]||(l[3]=[p(" Cancel ",-1)])]),_:1})):_("",!0)],32)):_("",!0),s("ul",ne,[(i(!0),y(N,null,T(r(D),u=>(i(),y("li",{key:u.id,class:"block px-2 pt-4 pb-1"},[o(G,{onEdit:S,onDelete:re=>A(u.id),comment:u},null,8,["onDelete","comment"])]))),128))]),s("div",{ref_key:"landmark",ref:h},null,512)])]),_:1})]),_:1},8,["title"]))}};export{ge as default};
